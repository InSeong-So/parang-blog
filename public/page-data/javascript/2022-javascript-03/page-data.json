{"componentChunkName":"component---src-templates-blog-post-js","path":"/javascript/2022-javascript-03/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"3ee0fc05-3cb2-5a2a-a4de-9405826b1572","excerpt":"자! 이 글에 오신 당신이 프론트엔드 개발자를 꿈꾸면서 공부를 시작했으나 리액트부터 배운 커리큘럼으로 한계를 느낀 분이라면 잘 찾아오셨습니다.\n우리는 자바스크립트만으로 간단한 앱을 구현해 볼 거에요. 1편은 “기본 기능 구현”입니다. HTML/CSS…","html":"<p>자! 이 글에 오신 당신이 프론트엔드 개발자를 꿈꾸면서 공부를 시작했으나 리액트부터 배운 커리큘럼으로 한계를 느낀 분이라면 잘 찾아오셨습니다.\n우리는 자바스크립트만으로 간단한 앱을 구현해 볼 거에요.</p>\n<p>1편은 “기본 기능 구현”입니다. HTML/CSS, 전반적인 세팅은 신경쓰지 마세요. 여러분은 오롯이 자바스크립트로 로직만 작성해주세요!</p>\n<h1>실습 준비</h1>\n<blockquote>\n<p><a href=\"https://github.com/FECrash/vanilla-catstagram/tree/60dc58e126fe52d9dd32b753d597ff8f9bb6559e\">저장소 위치</a></p>\n</blockquote>\n<h2>실행 순서</h2>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"># 1. 프로젝트 클론\ngit clone https://github.com/FECrash/vanilla-catstagram.git\n\n# 2. 클론한 프로젝트로 이동\ncd vanilla-catstragram\n\n# 3. 프로젝트 브런치 변경\ngit checkout step-01\n\n# 4. 의존성 설치\nnpm install\n\n# 5. 실행\nnpm run dev</code></pre></div>\n<h2>구동화면</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/38d6db3fad4abac0ccbddb2a084653ec/29114/2022-javascript-03-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.67088607594937%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIklEQVQoz52RwSsEYRjG5/9wc9yD4kJRbg6klEatcHKTC+WkCbVtqT1sW0ocOZGykQ2H3VabkOKiHMhV1mrMzJr95puf2dmxaTM167m8z+F5f9/7vp+CJ9d1aa1SSmzb4VN3PO9iWVWEEEHG9etffUoYMEwNKIT1Ka2AH19+e2dja5+V9AXLqTxa6oSdvQLC8UPRJ6yvWtfT8yuDA8PEelTUmSRd3SOMzW7j+FEZDehHZcM/vhhMTs0zN9HH+FAv06P9aKsZag7Rb/jbf1Ut1hbixDo7WE8kiasq2tJi8KhsH2iZBge7aTYzCR7u7zjLHXOayzYzbQMdUUPXKxgeuFz5wPQmtoUMbvwPoGla5AtFjg6zXJZK3F7fcFU8b35aGPAb/bGfS5Ou0eUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2022-javascript-03\"\n        title=\"2022-javascript-03\"\n        src=\"/static/38d6db3fad4abac0ccbddb2a084653ec/f058b/2022-javascript-03-01.png\"\n        srcset=\"/static/38d6db3fad4abac0ccbddb2a084653ec/c26ae/2022-javascript-03-01.png 158w,\n/static/38d6db3fad4abac0ccbddb2a084653ec/6bdcf/2022-javascript-03-01.png 315w,\n/static/38d6db3fad4abac0ccbddb2a084653ec/f058b/2022-javascript-03-01.png 630w,\n/static/38d6db3fad4abac0ccbddb2a084653ec/40601/2022-javascript-03-01.png 945w,\n/static/38d6db3fad4abac0ccbddb2a084653ec/78612/2022-javascript-03-01.png 1260w,\n/static/38d6db3fad4abac0ccbddb2a084653ec/29114/2022-javascript-03-01.png 1920w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>구성</h2>\n<blockquote>\n<p>프로젝트 설정도 심플합니다. sass, vite 만 사용합니다.</p>\n</blockquote>\n<p>앱을 킨 다음, 에디터로 돌아와 루트 경로의 <code class=\"language-text\">index.html</code>을 보면 아래의 코드가 반복되는 것을 알 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pin<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button-wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>anim-icon anim-icon-md heart<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>checkbox<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>cat-02<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>cat-02<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn2.thecatapi.com/images/58mi0uCwO.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>눈치채신 분들이 많을거에요. 해당 앱은 public Cat API를 사용하여 <strong>무한 스크롤(Infinite Scroll)</strong> 을 구현합니다. 그럼 이렇게 반복되는 부분은 앱의 어느 영역일까요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 539px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/29297be85d7fa474f76c2af1f01c72b0/10f9a/2022-javascript-03-02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 107.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFLElEQVQ4y6WVe1SNWRiHW7Mw4xK6KRJKN+l+4QiVcgktRomJUWk6SqaLKaVCYzSkJmNccpkwkxRKRpRyOV2lRJ0oFd2EZsway1pjzR/q1DPfOWlixn/zrfVb797f3u+z3/fb396vUm9vLzJZLwrbO2jl7/6j3n/prV9fX5/CyqU00OiRyQadZH0fBn5IPTL+fP2aN2+6FWAlmQD6v49M1tPfkAPl9vT5YjzWRbIx9hQxybkE7biA/+ZDbAhLQBy6B/+Q3YK+RSxYeV8cmkBA2F4CIw/jtyEKH3Esuw/l0t3d0w8MiT6PkpISWlMXsWBTNmpzLzPcNJeRphmC0hlldoZRlmcYbZPOaNs0lG1OMkaUySeGUUxQHs1I/WicxBWKtBXArVG7CFxqzzKbyUwzc0DXfivqhhvRMA5BwyQCTbMYtG3i0LTeyThB2qIkNO0S0dGdTUhQBJMcjzLf95IQoawfGLE9k42rVhPh9yk6KiNQHq2NqqEn6ibrUDXyQsVoDSN0vZlouxH9OVuERXxRVZuAhYEeG4LjcQgowjP2Pt09b4GRyR24OKwjTOyO/3of9LXU0NB2YFNkKkdOSci4KCUls5WC4iaKS6UEiIPQUlHFwtgYe2d/LNc/xSfpL94MRBiyPQsdvcVEhfoRHCTGZbYdDhb6rF8uIu/HbUhOx3HpWAy5qbu4nvYNaYkh+K1wwdbEAHNrV9TsjrI4UDIA7GPb4Zeo2GZiPmUsri4OxO+MIVtwPh63li2fiVgm0sPRRBMvJ2NBRoSumkvi5tWkp+xiX/I+9Gd4s8AjYmCX+4hLfcUYRwnThRRSjyWSn7GH775awloXA2YaaWI4UZOxQ5Qw1xc2TVuFedYGrHSewd7IDeT8tB8Xj1jmeCQO7vKWJAl2bklM1ZlAfLgnwSttcbUczzwzbaaMU2HU0I/QUFUl8ut4RHZ2qA8fiqnuRBbNsELsvpDosHBS0moQMu4HSoqriPD3YM1iSyJ8HJk8diiOs+ywEr6R2vBhin9UJBLR+vw57p6ejPp4mGJsqZsbVsZGONqYk5d9TnFYFMCutlqyDwYQH7xYSFEdtRFDWLHclVXe3ngHBKIxVhlfPz/kB0wcGICzsyNRcTsICgllnv0s7K2sSDueOghsb66l6OL3/LDNi4UzjTGeos1kjTFM19fBVE8Li+kGFBRep6uxiZKiMtwWOGFtNIVpk8ZjqKPNKrcl5F3M6b8c5MAbkgqunDvApRPRbN+0EheRJWb6k5gvMuFLfy9KbpVTU17C3QOJNJWVUl4tRez7OXamhrg6zWVL0BeUXL86CKyqvMOVCye4mZVAUrgbK13M8XF3JiU5hsamRjo7n/Gw6jaN167RUFpOR/tzOn97SWLCLqLDgzieHMfdyrL++1AOfPJYyuXs42T9vJei3MOcPbqNgwnh7NsZSGF+DvduVyCtvEXjg3oaaqVCv4rKu7UcOZBAVtp+buZnIJXWKO5SBbCj5QFlJflkn02lMC+De9Ul3CotEBZJ5drVHKR1NbS2t/Hw0SPuNzYirW+gsPAKBbnpVFfkC8exiNqGFiHCtym3NFZTIvmFhqZ6bkryOHXyEAU3CnjQ3KyA1AtpF5WWcK9OSsOjZppaW2hpe0zDw1ru1VRxu/ouze2/Dqbc1dnMnfIr1NdV0v6kTZhYx53qCqqqK2kQIqqV1pGSckyI7AFdL17w5NlT2js7edzWQltHGx1Pn/H7H6+Q3/7/1JTBQvN+SehT1JgeYfz9Oe/6vVuk/gZ7HdfY4ySwDQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2022-javascript-03\"\n        title=\"2022-javascript-03\"\n        src=\"/static/29297be85d7fa474f76c2af1f01c72b0/10f9a/2022-javascript-03-02.png\"\n        srcset=\"/static/29297be85d7fa474f76c2af1f01c72b0/c26ae/2022-javascript-03-02.png 158w,\n/static/29297be85d7fa474f76c2af1f01c72b0/6bdcf/2022-javascript-03-02.png 315w,\n/static/29297be85d7fa474f76c2af1f01c72b0/10f9a/2022-javascript-03-02.png 539w\"\n        sizes=\"(max-width: 539px) 100vw, 539px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>바로 여기죠. 즉 이 부분이 반복되는 부분으로 스크롤이 아래까지 내려가면 이미지 url을 fetch하여 동적으로 태그를 생성할 것입니다.</p>\n<p>해당 앱은 로그인, 좋아요 등의 기능을 구현할 수 있는 HTML/CSS를 미리 만들어 두었기 때문에 욕심이 날 수 있으나 지금 당장은 무한 스크롤 앱을 구현하는 것에 집중하면 좋겠습니다.</p>\n<h2>step 1 : 반복되는 DOM을 분리하기</h2>\n<p>상단에서 언급했던 <code class=\"language-text\">.pin</code> DOM을 볼까요? id와 label이 유니크하게 적혀 있고, img 태그의 src 부분을 교체할 수 있다면 동일한 성질의 다른 사진을 담은 카드를 여러 개 만들 수 있어보입니다. 일단 <code class=\"language-text\">index.html</code>에서 <code class=\"language-text\">.pin</code>을 모두 제거해보면 아래와 같이 남게 돼요.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>loader<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>자, 그러면 <code class=\"language-text\">.container</code>를 기억하고 해당 앱의 엔트리 파일인 <code class=\"language-text\">main.js</code>를 열어 로직을 수정해보겠습니다. public cat api의 주소는 <strong><a href=\"https://api.thecatapi.com/v1/images/search?size=full\">https://api.thecatapi.com/v1/images/search?size=full</a></strong> 입니다. 상단의 주소를 브라우저에 입력하면 배열 안에 하나의 객체로 id와 url, width와 height를 반환하는 것을 알 수 있습니다.</p>\n<p>사전에 10번 정도를 fetch한 뒤 해당 url을 주입하여 우리에게 친숙한 문자열 템플릿을 통해 고양이 카드들을 그려보도록 합시다.</p>\n<ul>\n<li><a href=\"https://github.com/FECrash/vanilla-catstagram/tree/step-02\"><strong>소스 보기</strong></a></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> $container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.container'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.thecatapi.com/v1/images/search?size=full'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">,</span> url <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">const</span> $pin <span class=\"token operator\">=</span> <span class=\"token comment\">/* html */</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  &lt;div class=\"pin\">\n    &lt;div class=\"button-wrapper\">\n      &lt;div class=\"anim-icon anim-icon-md heart\">\n        &lt;input type=\"checkbox\" id=\"cat-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\" />\n        &lt;label for=\"cat-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\">&lt;/label>\n      &lt;/div>\n    &lt;/div>\n    &lt;img src=\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\" />\n  &lt;/div></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  \n  $container<span class=\"token punctuation\">.</span><span class=\"token function\">insertAdjacentHTML</span><span class=\"token punctuation\">(</span><span class=\"token string\">'afterbegin'</span><span class=\"token punctuation\">,</span> $pin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p><code class=\"language-text\">insertAdjacentHTML</code> API가 생소하신 분들은 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentElement\"><strong>여기</strong></a>를 참고해주세요.</p>\n</blockquote>\n<p>간단한 코드죠? for-loop를 10번 돌고 각각의 루프마다 cat API를 콜하여 id, url을 가져옵니다. 그 후 문자열 템플릿으로 분리한 HTML에 id와 url을 입력해주면 끝입니다.</p>\n<p>자, 여기까지 완성되신 분들은 <code class=\"language-text\">npm run dev</code> 명령어를 터미널에 친 후 결과물을 확인해 봅시다. 확실히 카드가 그려지는 것을 볼 수 있죠? 그런데 명확하게 문제점도 식별됩니다. 고양이 사진이 뭔가… 뭔가 느리게 불려지고 있어요. 스크롤이 다다닥 추가되지 않나요? 기능상으론 문제가 되지 않는 코드입니다. 그럼에도 사용자 관점에서는 부자연스럽고 이상하죠. 어떻게 해결하면 좋을까요?</p>\n<p>저희는 이미 답을 알고 있을 것입니다. 방법은 무수히도 많죠. <strong>로딩 스피너를 출력</strong>하거나 <strong>스켈레톤 이미지</strong>를 적용하거나, <strong>Vurtualize</strong>를 이용하거나 <strong>페이지네이션</strong>을 적용하는 등 말이죠. 뭘 구현할지 걱정하지 마세요! 가장 고전적이면서도 효과적인, 로딩 스피너를 사용해볼 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>section</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>loading hidden<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>svg</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2000/svg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2000/svg<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xlink</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/1999/xlink<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>160px<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20px<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">viewBox</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 128 16<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xml:</span>space</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>preserve<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>path</span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#ffc1c4<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">d</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>M10,3.5C7.614-2.053.844-.758,0.8,5.681c-0.025,3.537,3.224,4.859,5.387,6.272A10.389,10.389,0,0,1,10.01,16c0.2-.782,1.863-2.711,3.8-4.084,2.123-1.5,5.412-2.736,5.387-6.272C19.156-.813,12.268-1.832,10,3.5Zm21.6,0c-2.382-5.548-9.152-4.254-9.2,2.186-0.025,3.537,3.224,4.859,5.387,6.272A10.389,10.389,0,0,1,31.61,16c0.2-.782,1.863-2.711,3.8-4.084,2.123-1.5,5.411-2.736,5.387-6.272C40.756-.813,33.868-1.832,31.6,3.5Zm21.6,0C50.814-2.053,44.044-.758,44,5.681c-0.025,3.537,3.224,4.859,5.387,6.272A10.389,10.389,0,0,1,53.21,16c0.2-.782,1.863-2.711,3.8-4.084,2.123-1.5,5.411-2.736,5.387-6.272C62.356-.813,55.468-1.832,53.2,3.5Zm21.6,0c-2.382-5.548-9.152-4.254-9.2,2.186-0.025,3.537,3.224,4.859,5.387,6.272A10.389,10.389,0,0,1,74.81,16c0.2-.782,1.863-2.711,3.8-4.084,2.123-1.5,5.412-2.736,5.387-6.272C83.956-.813,77.068-1.832,74.8,3.5Zm21.6,0c-2.382-5.548-9.152-4.254-9.2,2.186-0.025,3.537,3.224,4.859,5.387,6.272A10.389,10.389,0,0,1,96.41,16c0.2-.782,1.863-2.711,3.8-4.084,2.123-1.5,5.412-2.736,5.387-6.272C105.556-.813,98.668-1.832,96.4,3.5Zm21.6,0c-2.382-5.548-9.152-4.254-9.2,2.186-0.025,3.537,3.224,4.859,5.387,6.272A10.393,10.393,0,0,1,118.01,16c0.2-.782,1.863-2.711,3.8-4.084,2.123-1.5,5.412-2.736,5.387-6.272C127.156-.813,120.268-1.832,118,3.5Z<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>g</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>path</span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#ff0713<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">d</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>M-11.6,3.5c-2.382-5.548-9.152-4.254-9.2,2.186-0.025,3.537,3.224,4.859,5.387,6.272A10.389,10.389,0,0,1-11.59,16c0.2-.782,1.863-2.711,3.8-4.084,2.123-1.5,5.412-2.736,5.387-6.272C-2.444-.813-9.332-1.832-11.6,3.5Z<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>path</span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#ff454e<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">d</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>M-33.2,3.5c-2.382-5.548-9.152-4.254-9.2,2.186-0.025,3.537,3.224,4.859,5.387,6.272A10.389,10.389,0,0,1-33.19,16c0.2-.782,1.863-2.711,3.8-4.084,2.123-1.5,5.412-2.736,5.387-6.272C-24.044-.813-30.932-1.832-33.2,3.5Z<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>path</span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#ff8389<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">d</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>M-54.8,3.5C-57.186-2.053-63.956-.758-64,5.681c-0.025,3.537,3.224,4.859,5.387,6.272A10.389,10.389,0,0,1-54.79,16c0.2-.782,1.863-2.711,3.8-4.084,2.123-1.5,5.411-2.736,5.387-6.272C-45.644-.813-52.532-1.832-54.8,3.5Z<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>animateTransform</span> <span class=\"token attr-name\">attributeName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>transform<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>translate<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">values</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>22 0;43.5 0;65 0;86.5 0;108 0;129.5 0;151 0;172.5 0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">calcMode</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>discrete<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dur</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>900ms<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">repeatCount</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>indefinite<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>g</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>section</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>이미 보셨겠지만, <code class=\"language-text\">index.html</code>에 로딩 영역을 미리 만들어 놓았습니다! 저희는 호출만 하면 돼요. 한 번 해볼까요? 저희는 비동기 통신을 <strong>순차적으로</strong> 호출하고 있기 때문에 단순히 <code class=\"language-text\">호출 시작하기 직전에 로딩 보여주고 호출 끝나면... 숨기면 되잖아?</code>로 귀결되지 않습니다.</p>\n<p>이걸 <code class=\"language-text\">Promise.all</code>을 사용하여 해결해 봅시다.</p>\n<ul>\n<li><a href=\"https://github.com/FECrash/vanilla-catstagram/tree/step-03\"><strong>소스 보기</strong></a></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> $container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.container'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> $loading <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.loading'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getCatImage</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.thecatapi.com/v1/images/search?size=full'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">render</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">,</span> url <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> $pin <span class=\"token operator\">=</span> <span class=\"token comment\">/* html */</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  &lt;div class=\"pin\">\n    &lt;div class=\"button-wrapper\">\n      &lt;div class=\"anim-icon anim-icon-md heart\">\n        &lt;input type=\"checkbox\" id=\"cat-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\" />\n        &lt;label for=\"cat-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\">&lt;/label>\n      &lt;/div>\n    &lt;/div>\n    &lt;img src=\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\" />\n  &lt;/div></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n  $container<span class=\"token punctuation\">.</span><span class=\"token function\">insertAdjacentHTML</span><span class=\"token punctuation\">(</span><span class=\"token string\">'afterbegin'</span><span class=\"token punctuation\">,</span> $pin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> results <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  results<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">getCatImage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n$loading<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hidden'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>results<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cats</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    cats<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cat</span> <span class=\"token operator\">=></span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    $loading<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hidden'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>고양이 사진을 가져오는 함수인 <code class=\"language-text\">getCatImage</code>와 id, url을 입력받아 DOM에 그리는 <code class=\"language-text\">render</code> 함수를 만들었습니다. 나머지 코드는 거의 그대로지만, 모든 Promise가 <code class=\"language-text\">종료</code>되는 것을 기다리는 <code class=\"language-text\">Promise.all</code>을 통해 함수 호출-종료 시점을 제어할 수 있죠.</p>\n<blockquote>\n<p><code class=\"language-text\">Promise.all</code>을 자세히 알고 싶다면 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all\"><strong>여기</strong></a>를 참고해주세요.</p>\n</blockquote>\n<p>따라서 렌더가 끝난 뒤, 프로미스 체이닝을 통해 로딩 스피너를 숨기는 것까지 완료되었습니다. 자! 이제 <code class=\"language-text\">npm run dev</code>를 콘솔에서 입력해주세요. 앱을 확인해보면 로딩 스피너가 정상적으로 동작하고, 고양이 이미지를 불러와 카드로 생성하는 작업이 끝나면 로딩 스피너가 없어지는 것을 볼 수 있습니다!</p>\n<p>다음 글은 무한 스크롤을 추가하고 유틸성을 향상하는 작업을 진행하겠습니다.</p>\n<p>다들 고생하셨어요! 👏</p>","frontmatter":{"title":"바닐라로 앱 만들기 - 1","date":"August 06, 2022","description":null}},"previous":{"fields":{"slug":"/life/2022-life-02/"},"frontmatter":{"title":"2022년 상반기 회고"}},"next":null},"pageContext":{"id":"3ee0fc05-3cb2-5a2a-a4de-9405826b1572","previousPostId":"3a152a22-694f-596a-88a8-0fef6cb05dbb","nextPostId":null}},"staticQueryHashes":["2841359383","3257411868"]}